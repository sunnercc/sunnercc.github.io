<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <title>
    
    sunner
  </title>
  <!-- Icon -->
  
    <link rel="shortcut icon" href="/favicon.ico">
    
  
<link rel="stylesheet" href="/css/style.css">

  
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<script src="/js/pace.min.js"></script>

<meta name="generator" content="Hexo 7.0.0-rc2"></head>

<body>
  <main class="content">
    <section class="jumbotron">
  <div class="video">
    
    <div class="video-frame">
      <img src="/images/ocean/overlay-hero.png" alt="Decorative image frame">
    </div>
    
    <div class="video-media">
      <video playsinline="" autoplay="" loop="" muted="" data-autoplay="" poster="/images/ocean/ocean.png"
        x5-video-player-type="h5">
        <source src="/images/ocean/ocean.mp4" type="video/mp4">
        <source src="/images/ocean/ocean.ogv" type="video/ogg">
        <source src="/images/ocean/ocean.webm" type="video/webm">
        <p>Your user agent does not support the HTML5 Video element.</p>
      </video>
      <div class="video-overlay"></div>
    </div>
    <div class="video-inner text-center text-white">
      <h1><a href="/">sunner</a></h1>
      <p></p>
      <div><img src="/images/hexo-inverted.svg" class="brand" alt="sunner"></div>
    </div>
    <div class="video-learn-more">
      <a class="anchor" href="#landingpage"><i class="fe fe-mouse"></i></a>
    </div>
  </div>
</section>
<div id="landingpage">
  <section class="outer">
  <article class="articles">
    
    <h1 class="page-type-title"></h1>
    
    
    <article id="post-http" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2017/12/05/http/">http</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2017/12/05/http/" class="article-date">
  <time datetime="2017-12-05T03:12:03.000Z" itemprop="datePublished">2017-12-05</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p><img src="http/http.png" alt></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://github.com/2017/12/05/http/" data-id="cll91frgi0007eu4m16olxp46" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-post" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2017/11/05/post/">POST</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2017/11/05/post/" class="article-date">
  <time datetime="2017-11-05T03:12:53.000Z" itemprop="datePublished">2017-11-05</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <pre><code>#define Boundary @&quot;--dagdsadgsahsdahdsfagd&quot;

Content-Type: multipart/form-data;boundary=--Boundary

--Boundary\r\n
Content-Disposition:form-data;name=&apos;参数key&apos;;filename=&apos;上传文件名&apos;\r\n
Content-Type:application/zip\r\n
\r\n
二进制文件数据\r\n

--Boundary\r\n
Content-Disposition:form-data;name=&apos;参数key&apos;\r\n
\r\n
参数value\r\n

--Boundary\r\n
Content-Disposition:form-data;name=&apos;参数key&apos;\r\n
\r\n
参数value\r\n

--Boundary\r\n
Content-Disposition:form-data;name=&apos;参数key&apos;\r\n
\r\n
参数value\r\n

--Boundary--\r\n
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://github.com/2017/11/05/post/" data-id="cll91frgm000aeu4mqroikfkx" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-swift循环引用" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2017/10/05/swift%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8/">swift循环引用</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2017/10/05/swift%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8/" class="article-date">
  <time datetime="2017-10-05T03:13:29.000Z" itemprop="datePublished">2017-10-05</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <h3 id="weak"><a href="#weak" class="headerlink" title="weak"></a>weak</h3><p>在我理解中，weak和oc中的weak没有任何区别，弱引用，引用基数不会加1，当引用的对象释放的时候，指针会被置为nil、避免僵尸对象的产生</p>
<h3 id="unowned"><a href="#unowned" class="headerlink" title="unowned"></a>unowned</h3><p>这个很有意思，相当于oc中unsafe-unretain，也就是不安全不retain, 不安全就是当引用的对象释放的时候，指针不会被置为nil，会产生也僵尸对象。不retain也就是弱引用，引用计数不会加1.</p>
<p>苹果有一个customer和card的例子,一个customer不一定拥有card，所以customer使用可选类型的strong指针引用card，一个card一定联系一个customer，所以card使用unowned引用customer。</p>
<blockquote>
<p>“The relationship between Customer and CreditCard is slightly different from the relationship between Apartment and Person seen in the weak reference example above. In this data model, a customer may or may not have a credit card, but a credit card will always be associated with a customer. A CreditCard instance never outlives the Customer that it refers to. To represent this, the Customer class has an optional card property, but the CreditCard class has an unowned (and nonoptional) customer property.”</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> card: <span class="type">CreditCard?</span></span><br><span class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">"\(name) is being deinitialized"</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CreditCard</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> number: <span class="type">UInt64</span></span><br><span class="line">    <span class="keyword">unowned</span> <span class="keyword">let</span> customer: <span class="type">Customer</span></span><br><span class="line">    <span class="keyword">init</span>(number: <span class="type">UInt64</span>, customer: <span class="type">Customer</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.number = number</span><br><span class="line">        <span class="keyword">self</span>.customer = customer</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">"Card #\(number) is being deinitialized"</span>) &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2017/10/05/swift循环引用/swiftUnown.png" alt></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://github.com/2017/10/05/swift%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8/" data-id="cll91frgp000deu4mhalbaboh" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-swift-protocol-extentsion" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2017/08/05/swift-protocol-extentsion/">swift-protocol-extentsion</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2017/08/05/swift-protocol-extentsion/" class="article-date">
  <time datetime="2017-08-05T03:13:17.000Z" itemprop="datePublished">2017-08-05</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p>协议在我的理解中就是一个定义好的规范，相当于C++的抽象类，Java的接口。定义好这个规范之后，其他类可以去遵循这个协议，去实现协议中的方法和属性。但是如果有很多类对协议方法的方法体都一样，这样就会写大量重复代码，浪费实现和精力，这个时候协议的extension就起作用了，extension可以给协议扩展一个协议方法的默认实现，这样其他类就可以不用实现了，使用extension中的默认实现就可以了。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Motion</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/// 重力感应 透视</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">motion</span><span class="params">(effectOffset: CGFloat, target: UIView)</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Motion</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/// 重力感应 透视</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">motion</span><span class="params">(effectOffset: CGFloat, target: UIView)</span></span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> motionX = <span class="type">UIInterpolatingMotionEffect</span>(keyPath: <span class="string">"center.x"</span>, type: .tiltAlongHorizontalAxis)</span><br><span class="line">        motionX.maximumRelativeValue = effectOffset</span><br><span class="line">        motionX.minimumRelativeValue = -effectOffset</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> motionY = <span class="type">UIInterpolatingMotionEffect</span>(keyPath: <span class="string">"center.y"</span>, type: .tiltAlongVerticalAxis)</span><br><span class="line">        motionY.maximumRelativeValue = effectOffset</span><br><span class="line">        motionY.minimumRelativeValue = -effectOffset</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> motionGroup = <span class="type">UIMotionEffectGroup</span>()</span><br><span class="line">        motionGroup.motionEffects = [motionX, motionY]</span><br><span class="line">        </span><br><span class="line">        target.addMotionEffect(motionGroup)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://github.com/2017/08/05/swift-protocol-extentsion/" data-id="cll91frgo000ceu4mhwk1j5ca" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-内存分配" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2017/06/21/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/">内存分配</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2017/06/21/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/" class="article-date">
  <time datetime="2017-06-21T03:11:32.000Z" itemprop="datePublished">2017-06-21</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p><img src="/2017/06/21/内存分配/cmem.png" alt></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>设置断点运行</li>
<li>找到xcode的导航条</li>
<li>Debug-&gt;Debug Workflow-&gt; Always show Dissambly(勾选)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Tets`main:</span><br><span class="line">    0x100000f90 &lt;+0&gt;:  pushq  %rbp</span><br><span class="line">    0x100000f91 &lt;+1&gt;:  movq   %rsp, %rbp</span><br><span class="line">    0x100000f94 &lt;+4&gt;:  xorl   %eax, %eax</span><br><span class="line">    0x100000f96 &lt;+6&gt;:  movl   $0x0, -0x4(%rbp)</span><br><span class="line">    0x100000f9d &lt;+13&gt;: movl   $0x4, -0x8(%rbp)</span><br><span class="line">    0x100000fa4 &lt;+20&gt;: movl   $0x5, -0xc(%rbp)</span><br><span class="line">    0x100000fab &lt;+27&gt;: popq   %rbp</span><br><span class="line">    0x100000fac &lt;+28&gt;: retq</span><br></pre></td></tr></table></figure>
<p><img src="/2017/06/21/内存分配/cms.png" alt></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://github.com/2017/06/21/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/" data-id="cll91frgr000eeu4my2ys1ybf" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-lipo" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2017/04/05/lipo/">lipo</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2017/04/05/lipo/" class="article-date">
  <time datetime="2017-04-05T03:12:13.000Z" itemprop="datePublished">2017-04-05</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p>根据公司项目的需求，需要把核心代码封装成SDK(framework)。为了能够使得真机和模拟器共用，需要将SDK(framework)做成共用版本。这时候lipo就派上用场了。</p>
<h3 id="查看SDK支持的架构-模拟器"><a href="#查看SDK支持的架构-模拟器" class="headerlink" title="查看SDK支持的架构(模拟器)"></a>查看SDK支持的架构(模拟器)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifuwo:B ifuwo$ lipo -info MeasureSDK.framework/MeasureSDK_B </span><br><span class="line">Architectures <span class="keyword">in</span> the fat file: MeasureSDK.framework/MeasureSDK_B are: i386 x86_64</span><br></pre></td></tr></table></figure>
<h3 id="查看SDK支持的架构-真机"><a href="#查看SDK支持的架构-真机" class="headerlink" title="查看SDK支持的架构(真机)"></a>查看SDK支持的架构(真机)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifuwo:B ifuwo$ lipo -info MeasureSDK_B.framework/MeasureSDK_B </span><br><span class="line">Architectures <span class="keyword">in</span> the fat file: MeasureSDK_B.framework/MeasureSDK_B are: armv7 arm64</span><br></pre></td></tr></table></figure>
<h3 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifuwo:B ifuwo$ lipo -create MeasureSDK.framework/MeasureSDK_B MeasureSDK_B.framework/MeasureSDK_B -output MeasureSDK_B</span><br></pre></td></tr></table></figure>
<h3 id="合并之后查看SDK支持的架构-模拟器真机共用"><a href="#合并之后查看SDK支持的架构-模拟器真机共用" class="headerlink" title="合并之后查看SDK支持的架构(模拟器真机共用)"></a>合并之后查看SDK支持的架构(模拟器真机共用)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifuwo:B ifuwo$ lipo -info MeasureSDK_B.framework/MeasureSDK_B </span><br><span class="line">Architectures <span class="keyword">in</span> the fat file: MeasureSDK_B.framework/MeasureSDK_B are: armv7 arm64 i386 x86_64</span><br></pre></td></tr></table></figure>
<h3 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h3><p>SDK的使用过程中没有任何问题，模拟器和真机都可以正常使用。但是在提交苹果审核的时候，却报错了。大概意思是说苹果不支持x86_64和i386架构。后来的解决方案就是把x86_64和i386重新剔除掉了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR ITMS-90087:<span class="string">"Unsupported Architectures.The executable for ..../..SDK.framework contains unsupported architectures '[x86_64, i386]'"</span></span><br></pre></td></tr></table></figure>
<h3 id="后来得知一种解决方法"><a href="#后来得知一种解决方法" class="headerlink" title="后来得知一种解决方法:"></a>后来得知一种解决方法:</h3><ol>
<li>制作一个release版本的真机SDK</li>
<li>制作一个debug版本的模拟器SDK</li>
<li>合并</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://github.com/2017/04/05/lipo/" data-id="cll91frgk0008eu4mvqxy9yrc" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-京东和喜马拉雅面试题目" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2017/03/05/%E4%BA%AC%E4%B8%9C%E5%92%8C%E5%96%9C%E9%A9%AC%E6%8B%89%E9%9B%85%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE/">京东和喜马拉雅面试题目</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2017/03/05/%E4%BA%AC%E4%B8%9C%E5%92%8C%E5%96%9C%E9%A9%AC%E6%8B%89%E9%9B%85%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE/" class="article-date">
  <time datetime="2017-03-05T03:11:14.000Z" itemprop="datePublished">2017-03-05</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <h2 id="关键字的区别"><a href="#关键字的区别" class="headerlink" title="关键字的区别"></a>关键字的区别</h2><p>readonly</p>
<ul>
<li>修饰任何类型，仅仅生成get方法</li>
</ul>
<p>readwrite</p>
<ul>
<li>修饰任何类型，生成get方法，又生成set方法</li>
</ul>
<p>strong</p>
<ul>
<li>修饰对象类型. 强引用被修饰对象</li>
</ul>
<p>copy</p>
<ul>
<li>修饰不可变对象类型。强引用被修饰对象</li>
</ul>
<p>weak </p>
<ul>
<li>修饰对象类型。弱引用被修饰对象，当被修饰对象释放的时候，weak修饰的对象指针会指向nil</li>
</ul>
<p>unsafe_unretained (不safe不retain)</p>
<ul>
<li>修饰对象类型。弱引用被修饰对象。与weak相似。区别在于:当被修饰对象释放的时候，weak修饰的对象指针不会指向nil,会造成野指针。</li>
</ul>
<h2 id="mrc到arc的转化过程"><a href="#mrc到arc的转化过程" class="headerlink" title="mrc到arc的转化过程"></a>mrc到arc的转化过程</h2><h2 id="arc如何实现weak"><a href="#arc如何实现weak" class="headerlink" title="arc如何实现weak"></a>arc如何实现weak</h2><h2 id="releasepool的底层实现"><a href="#releasepool的底层实现" class="headerlink" title="releasepool的底层实现"></a>releasepool的底层实现</h2><h2 id="如何统计错误日志"><a href="#如何统计错误日志" class="headerlink" title="如何统计错误日志"></a>如何统计错误日志</h2><h2 id="corefoundation的内存管理"><a href="#corefoundation的内存管理" class="headerlink" title="corefoundation的内存管理"></a>corefoundation的内存管理</h2><h2 id="从cf对象转化为oc对象，内存如何管理"><a href="#从cf对象转化为oc对象，内存如何管理" class="headerlink" title="从cf对象转化为oc对象，内存如何管理"></a>从cf对象转化为oc对象，内存如何管理</h2><h2 id="view的drewrect为何会占用内存"><a href="#view的drewrect为何会占用内存" class="headerlink" title="view的drewrect为何会占用内存"></a>view的drewrect为何会占用内存</h2><h2 id="view和layer的关系"><a href="#view和layer的关系" class="headerlink" title="view和layer的关系"></a>view和layer的关系</h2><h2 id="view可以没有layer吗"><a href="#view可以没有layer吗" class="headerlink" title="view可以没有layer吗"></a>view可以没有layer吗</h2><h2 id="响应链过程"><a href="#响应链过程" class="headerlink" title="响应链过程"></a>响应链过程</h2><h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><h2 id="多线程和数据库的同时访问问题"><a href="#多线程和数据库的同时访问问题" class="headerlink" title="多线程和数据库的同时访问问题"></a>多线程和数据库的同时访问问题</h2><h2 id="数据库锁机制"><a href="#数据库锁机制" class="headerlink" title="数据库锁机制"></a>数据库锁机制</h2><h2 id="http-udp-tcp"><a href="#http-udp-tcp" class="headerlink" title="http udp tcp"></a>http udp tcp</h2><h2 id="http响应体，响应头-请求头-请求体"><a href="#http响应体，响应头-请求头-请求体" class="headerlink" title="http响应体，响应头 请求头 请求体"></a>http响应体，响应头 请求头 请求体</h2><h2 id="block"><a href="#block" class="headerlink" title="__block"></a>__block</h2><h2 id="循环引用原理"><a href="#循环引用原理" class="headerlink" title="循环引用原理"></a>循环引用原理</h2><h2 id="设计一个播放器架构"><a href="#设计一个播放器架构" class="headerlink" title="设计一个播放器架构"></a>设计一个播放器架构</h2><h2 id="堆区栈区。。的不同"><a href="#堆区栈区。。的不同" class="headerlink" title="堆区栈区。。的不同"></a>堆区栈区。。的不同</h2><h2 id="单粒的内存分配原理"><a href="#单粒的内存分配原理" class="headerlink" title="单粒的内存分配原理"></a>单粒的内存分配原理</h2><h2 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h2><h2 id="通知是异步还是同步"><a href="#通知是异步还是同步" class="headerlink" title="通知是异步还是同步"></a>通知是异步还是同步</h2><h2 id="异步和同步解释"><a href="#异步和同步解释" class="headerlink" title="异步和同步解释"></a>异步和同步解释</h2><h2 id="runloop"><a href="#runloop" class="headerlink" title="runloop"></a>runloop</h2><h2 id="常用runtime"><a href="#常用runtime" class="headerlink" title="常用runtime"></a>常用runtime</h2><h2 id="category实现属性，内存管理过程"><a href="#category实现属性，内存管理过程" class="headerlink" title="category实现属性，内存管理过程"></a>category实现属性，内存管理过程</h2><h2 id="sdk架构相关"><a href="#sdk架构相关" class="headerlink" title="sdk架构相关"></a>sdk架构相关</h2><h2 id="block底层实现"><a href="#block底层实现" class="headerlink" title="block底层实现"></a>block底层实现</h2><h2 id="解决手势冲突"><a href="#解决手势冲突" class="headerlink" title="解决手势冲突"></a>解决手势冲突</h2><h2 id="define和const"><a href="#define和const" class="headerlink" title="define和const"></a>define和const</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://github.com/2017/03/05/%E4%BA%AC%E4%B8%9C%E5%92%8C%E5%96%9C%E9%A9%AC%E6%8B%89%E9%9B%85%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9B%AE/" data-id="cll91frgt000ieu4mh3j8xw4d" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-frame-bounds" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2016/10/05/frame-bounds/">frame&amp;bounds</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2016/10/05/frame-bounds/" class="article-date">
  <time datetime="2016-10-05T03:11:45.000Z" itemprop="datePublished">2016-10-05</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p>创建一个父视图(fatherView)， 一个子视图(sonView)</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let fatherView = <span class="built_in">UIView</span>()</span><br><span class="line">fatherView.frame = <span class="built_in">CGRect</span>(x: <span class="number">30</span>, y: <span class="number">30</span>, width: <span class="number">200</span>, height: <span class="number">200</span>)</span><br><span class="line">fatherView.backgroundColor = .red</span><br><span class="line"><span class="keyword">self</span>.view.addSubview(fatherView)</span><br><span class="line"></span><br><span class="line">let sonView = <span class="built_in">UIView</span>()</span><br><span class="line">sonView.frame = <span class="built_in">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="number">100</span>, height: <span class="number">100</span>)</span><br><span class="line">sonView.backgroundColor = .yellow</span><br><span class="line">fatherView.addSubview(sonView)</span><br></pre></td></tr></table></figure>
<p><img src="/2016/10/05/frame-bounds/frame-bounds0.png" alt="黑线是father的frame 坐标系 绿线是father的本地坐标系"></p>
<p>更改一下父视图的bounds, 相当于更改了父视图的本地坐标系，父视图的左上角不再是父视图本地坐标系的原点(bounds默认的origin是(0,0))，而是本地坐标系的bounds.origin点.子视图会根据父视图的本地坐标系去布局(frame)。所以子视图的位置会发生改变。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">let fatherView = <span class="built_in">UIView</span>()</span><br><span class="line">fatherView.frame = <span class="built_in">CGRect</span>(x: <span class="number">30</span>, y: <span class="number">30</span>, width: <span class="number">200</span>, height: <span class="number">200</span>)</span><br><span class="line">fatherView.backgroundColor = .red</span><br><span class="line"><span class="keyword">self</span>.view.addSubview(fatherView)</span><br><span class="line"></span><br><span class="line">fatherView.bounds = <span class="built_in">CGRect</span>(x: <span class="number">10</span>, y: <span class="number">10</span>, width: <span class="number">200</span>, height: <span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">let sonView = <span class="built_in">UIView</span>()</span><br><span class="line">sonView.frame = <span class="built_in">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="number">100</span>, height: <span class="number">100</span>)</span><br><span class="line">sonView.backgroundColor = .yellow</span><br><span class="line">fatherView.addSubview(sonView)</span><br></pre></td></tr></table></figure>
<p><img src="/2016/10/05/frame-bounds/frame-bounds1.png" alt="黑线是father的frame 坐标系 绿线是father的本地坐标系"></p>
<p>当父视图旋转之后，自己的本地坐标系会跟着旋转，相当于子视图的布局没有变化。但是父视图的frame会发生变化。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">let fatherView = <span class="built_in">UIView</span>()</span><br><span class="line">fatherView.frame = <span class="built_in">CGRect</span>(x: <span class="number">30</span>, y: <span class="number">30</span>, width: <span class="number">200</span>, height: <span class="number">200</span>)</span><br><span class="line">fatherView.backgroundColor = .red</span><br><span class="line"><span class="keyword">self</span>.view.addSubview(fatherView)</span><br><span class="line"></span><br><span class="line">fatherView.bounds = <span class="built_in">CGRect</span>(x: <span class="number">10</span>, y: <span class="number">10</span>, width: <span class="number">200</span>, height: <span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">let sonView = <span class="built_in">UIView</span>()</span><br><span class="line">sonView.frame = <span class="built_in">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="number">100</span>, height: <span class="number">100</span>)</span><br><span class="line">sonView.backgroundColor = .yellow</span><br><span class="line">fatherView.addSubview(sonView)</span><br><span class="line"></span><br><span class="line">fatherView.transform = <span class="built_in">CGAffineTransform</span>(rotationAngle: <span class="built_in">CGFloat</span>(Double.pi / <span class="number">4</span>))</span><br><span class="line">print(fatherView.bounds)</span><br><span class="line">print(fatherView.frame)</span><br></pre></td></tr></table></figure>
<p><img src="/2016/10/05/frame-bounds/frame-bounds2.png" alt="黑线是father的frame 坐标系 绿线是father的本地坐标系"></p>
<p><img src="/2016/10/05/frame-bounds/frame-bounds3.png" alt></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://github.com/2016/10/05/frame-bounds/" data-id="cll91frgh0006eu4m6g9en5k8" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-copy-mutableCopy" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2016/08/05/copy-mutableCopy/">copy&amp;mutableCopy</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2016/08/05/copy-mutableCopy/" class="article-date">
  <time datetime="2016-08-05T03:12:26.000Z" itemprop="datePublished">2016-08-05</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p>对于熟悉iOS开发的人的来说，copy和mutableCopy这两个词肯定不陌生。但是区别是什么呢，百度一搜一大堆，但是解释的千奇百怪，毫无真相。</p>
<h2 id="首先明白两个概念"><a href="#首先明白两个概念" class="headerlink" title="首先明白两个概念"></a>首先明白两个概念</h2><ul>
<li>浅拷贝: 也称为浅复制。不开辟新的内存空间。仅仅是拷贝指向对象的指针。</li>
<li>深拷贝: 也称为深复制。开辟新的内存空间。拷贝整个对象内存到新开辟的内存中去。</li>
</ul>
<h2 id="解释一个英文单词"><a href="#解释一个英文单词" class="headerlink" title="解释一个英文单词"></a>解释一个英文单词</h2><ul>
<li>mutable 可变的</li>
</ul>
<p>iOS开发中最常见的类就是NSString, 还有一些容器类(NSArray, NSDictionary, NSSet).我会选取经典的NSString以及容器类的代表NSArray来写4个例子。得出实验结论。</p>
<h2 id="例子1"><a href="#例子1" class="headerlink" title="例子1"></a>例子1</h2><p>针对NSSting 写出下列测试代码：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *str1 = <span class="string">@"123"</span>;  <span class="comment">// 常量区分配</span></span><br><span class="line"><span class="built_in">NSString</span> *str2 = [str1 <span class="keyword">copy</span>];</span><br><span class="line"><span class="built_in">NSMutableString</span> *str3 = [str1 mutableCopy];</span><br><span class="line">printf(<span class="string">"\n str1 -&gt; = %p \n str2 -&gt; = %p \n str3 -&gt; = %p"</span>, str1, str2, str3);</span><br></pre></td></tr></table></figure>
<p>控制台的打印如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">str1 -&gt; = 0x1072d9088</span><br><span class="line">str2 -&gt; = 0x1072d9088</span><br><span class="line">str3 -&gt; = 0x600001c2c000</span><br></pre></td></tr></table></figure>
<p>可以看出：</p>
<ul>
<li>str1指向的地址和str2指向的地址是同一个地址.str2并没有开辟新的空间,仅仅是指针的拷贝.</li>
<li>str1指向的地址和str3指向的地址不是同一个地址。str3开辟了新的空间.</li>
</ul>
<h2 id="例子2"><a href="#例子2" class="headerlink" title="例子2"></a>例子2</h2><p>针对NSMutableString 写出下列测试代码：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *str1 = <span class="string">@"123"</span>; <span class="comment">// 常量区分配</span></span><br><span class="line"><span class="built_in">NSMutableString</span> *m_str1 = [<span class="built_in">NSMutableString</span> stringWithString:str1];  <span class="comment">// 堆区重新分配</span></span><br><span class="line"><span class="built_in">NSString</span> *m_str2 = [m_str1 <span class="keyword">copy</span>];</span><br><span class="line"><span class="built_in">NSMutableString</span> *m_str3 = [m_str1 mutableCopy];</span><br><span class="line">printf(<span class="string">"\n m_str1 -&gt; = %p \n m_str2 -&gt; = %p \n m_str3 -&gt; = %p"</span>, m_str1, m_str2, m_str3);</span><br></pre></td></tr></table></figure>
<p>控制台的打印如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">m_str1 -&gt; = 0x600003143b40</span><br><span class="line">m_str2 -&gt; = 0xbe9e1c56d14b79e2</span><br><span class="line">m_str3 -&gt; = 0x600003143e70</span><br></pre></td></tr></table></figure>
<p>可以看出：</p>
<ul>
<li>m_str1指向的地址和m_str2指向的地址不是同一个地址. m_str2开辟了新的空间.</li>
<li>m_str1指向的地址和m_str3指向的地址不是同一个地址。m_str3开辟了新的空间.</li>
</ul>
<h2 id="例子3"><a href="#例子3" class="headerlink" title="例子3"></a>例子3</h2><p>针对容器类NSArray 写出下列测试代码：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *arr1 = @[@<span class="number">1</span>, @<span class="number">2</span>, @<span class="number">3</span>];</span><br><span class="line"><span class="built_in">NSArray</span> *arr2 = [arr1 <span class="keyword">copy</span>];</span><br><span class="line"><span class="built_in">NSMutableArray</span> *arr3 = [arr1 mutableCopy];</span><br><span class="line">printf(<span class="string">"\n arr1 -&gt; = %p \n arr2 -&gt; = %p \n arr3 -&gt; = %p"</span>, arr1, arr2, arr3);</span><br><span class="line">printf(<span class="string">"\n arr1 items:"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr1.count; i++) &#123;</span><br><span class="line">    printf(<span class="string">"\n %d -&gt; = %p"</span>, i, arr1[i]);</span><br><span class="line">&#125;</span><br><span class="line">printf(<span class="string">"\n arr2 items:"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr2.count; i++) &#123;</span><br><span class="line">    printf(<span class="string">"\n %d -&gt; = %p"</span>, i, arr2[i]);</span><br><span class="line">&#125;</span><br><span class="line">printf(<span class="string">"\n arr3 items:"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr3.count; i++) &#123;</span><br><span class="line">    printf(<span class="string">"\n %d -&gt; = %p"</span>, i, arr3[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>控制台的打印如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">arr1 -&gt; = 0x600001490090</span><br><span class="line">arr2 -&gt; = 0x600001490090</span><br><span class="line">arr3 -&gt; = 0x6000014900c0</span><br><span class="line">arr1 items:</span><br><span class="line">0 -&gt; = 0xb690da9c196700a8</span><br><span class="line">1 -&gt; = 0xb690da9c19670098</span><br><span class="line">2 -&gt; = 0xb690da9c19670088</span><br><span class="line">arr2 items:</span><br><span class="line">0 -&gt; = 0xb690da9c196700a8</span><br><span class="line">1 -&gt; = 0xb690da9c19670098</span><br><span class="line">2 -&gt; = 0xb690da9c19670088</span><br><span class="line">arr3 items:</span><br><span class="line">0 -&gt; = 0xb690da9c196700a8</span><br><span class="line">1 -&gt; = 0xb690da9c19670098</span><br><span class="line">2 -&gt; = 0xb690da9c19670088</span><br></pre></td></tr></table></figure>
<p>可以看出：</p>
<ul>
<li>arr1指向的地址和arr2指向的地址是同一个地址.str2并没有开辟新的空间,仅仅是指针的拷贝.</li>
<li>arr1中的子元素指向的地址和arr2中的子元素指向的地址是同一个地址, 子元素没有开辟内存，仅仅是指针的拷贝</li>
<li>arr1指向的地址和str3指向的地址不是同一个地址。arr3开辟了新的空间.</li>
<li>arr1中的子元素指向的地址和arr3中的子元素指向的地址是同一个地址, 子元素没有开辟内存，仅仅是指针的拷贝</li>
</ul>
<h2 id="例子4"><a href="#例子4" class="headerlink" title="例子4"></a>例子4</h2><p>针对容器类NSMutableArray 写出下列测试代码：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *arr1 = @[@<span class="number">1</span>, @<span class="number">2</span>, @<span class="number">3</span>];</span><br><span class="line"><span class="built_in">NSMutableArray</span> *m_arr1 = [<span class="built_in">NSMutableArray</span> arrayWithArray:arr1];</span><br><span class="line"><span class="built_in">NSArray</span> *m_arr2 = [arr1 <span class="keyword">copy</span>];</span><br><span class="line"><span class="built_in">NSMutableArray</span> *m_arr3 = [arr1 mutableCopy];</span><br><span class="line">printf(<span class="string">"\n m_arr1 -&gt; = %p \n m_arr2 -&gt; = %p \n m_arr3 -&gt; = %p"</span>, m_arr1, m_arr2, m_arr3);</span><br><span class="line">printf(<span class="string">"\n m_arr1 items:"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_arr1.count; i++) &#123;</span><br><span class="line">    printf(<span class="string">"\n %d -&gt; = %p"</span>, i, m_arr1[i]);</span><br><span class="line">&#125;</span><br><span class="line">printf(<span class="string">"\n m_arr2 items:"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_arr2.count; i++) &#123;</span><br><span class="line">    printf(<span class="string">"\n %d -&gt; = %p"</span>, i, m_arr2[i]);</span><br><span class="line">&#125;</span><br><span class="line">printf(<span class="string">"\n m_arr3 items:"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_arr3.count; i++) &#123;</span><br><span class="line">    printf(<span class="string">"\n %d -&gt; = %p"</span>, i, m_arr3[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>控制台的打印如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">m_arr1 -&gt; = 0x6000014900c0</span><br><span class="line">m_arr2 -&gt; = 0x600001490090</span><br><span class="line">m_arr3 -&gt; = 0x600001490030</span><br><span class="line">m_arr1 items:</span><br><span class="line">0 -&gt; = 0xb690da9c196700a8</span><br><span class="line">1 -&gt; = 0xb690da9c19670098</span><br><span class="line">2 -&gt; = 0xb690da9c19670088</span><br><span class="line">m_arr2 items:</span><br><span class="line">0 -&gt; = 0xb690da9c196700a8</span><br><span class="line">1 -&gt; = 0xb690da9c19670098</span><br><span class="line">2 -&gt; = 0xb690da9c19670088</span><br><span class="line">m_arr3 items:</span><br><span class="line">0 -&gt; = 0xb690da9c196700a8</span><br><span class="line">1 -&gt; = 0xb690da9c19670098</span><br><span class="line">2 -&gt; = 0xb690da9c19670088</span><br></pre></td></tr></table></figure>
<p>可以看出</p>
<ul>
<li>m_arr1指向的地址和m_str2指向的地址是同一个地址. arr2开辟了新的空间.</li>
<li>m_arr1中的子元素指向的地址和m_arr2中的子元素指向的地址是同一个地址, 子元素没有开辟内存，仅仅是指针的拷贝</li>
<li>m_str1指向的地址和m_str3指向的地址不是同一个地址。str3开辟了新的空间</li>
<li>m_arr1中的子元素指向的地址和m_arr3中的子元素指向的地址是同一个地址, 子元素没有开辟内存，仅仅是指针的拷贝</li>
</ul>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><ul>
<li>copy产生不可变类型<ul>
<li>不可变类型 -&gt; copy -&gt; 不可变类型 : 不开辟空间</li>
<li>可变类型 -&gt; copy -&gt; 不可变类型 : 开辟空间</li>
<li>容器类中的子元素仅仅指针拷贝,不开辟空间</li>
</ul>
</li>
<li>mutableCopy产生可变类型<ul>
<li>不可变类型 -&gt; mutableCopy -&gt; 可变类型 : 开辟空间</li>
<li>可变类型 -&gt; copy -&gt; 可变类型 : 开辟空间</li>
<li>容器类中的子元素仅仅指针拷贝,不开辟空间</li>
</ul>
</li>
</ul>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="https://github.com/sunnercc/Program/tree/master/copy-mutableCopy">code</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://github.com/2016/08/05/copy-mutableCopy/" data-id="cll91frgf0004eu4ml37df63w" class="article-share-link">
        Share
      </a>
      
    </footer>

  </div>

  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    <a class="extend prev" rel="prev" href="/">Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>
  
</section>
</div>
    <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>sunner &copy; 2023</li>
      
        <li>
          
            <a href="https://beian.miit.gov.cn/" target="_blank"></a>
            
        </li>
      
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>theme  <a href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li>
    </ul>
    <p><ul class="list-inline">
  
  <li><i class="fe fe-bar-chart tooltip" data-tooltip="PV"></i> <span id="busuanzi_value_site_pv"></span></li>
  
  <li><i class="fe fe-smile-alt tooltip" data-tooltip="UV"></i> <span id="busuanzi_value_site_uv"></span></li>
  
</ul></p>
  </div>
</footer>
  </main>
  <aside class="sidebar">
    <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/hexo.svg" alt="sunner"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">Home</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">Archives</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/gallery">Gallery</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">About</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="Search">
        <i class="fe fe-search"></i>
        Search
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="fe fe-feed"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
  </aside>
  
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>



<script src="/fancybox/jquery.fancybox.min.js"></script>






<script src="/js/ocean.js"></script>

</body>

</html>